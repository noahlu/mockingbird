<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>在Javascript中获取元素样式 - 前端网事</title>
<link rel="stylesheet" charset="utf-8" href="/assets/lib/google-code-prettify/prettify.css" />
<link rel="stylesheet" charset="utf-8" href="/assets/lib/bootstrap/css/bootstrap.css" />
<link rel="stylesheet" charset="utf-8" href="/assets/css/global.css" />
<script charset="utf-8" src="/assets/lib/seajs/sea.js"></script>
<script type="text/javascript">
seajs.config({
    alias : {
        'jquery': '/assets/lib/jquery/1.8.1/jquery.min.js',       
        'bootstrap': '/assets/lib/bootstrap/js/bootstrap.min.js',       
        'prettify': '/assets/lib/google-code-prettify/prettify.js',       
    },
    preload: 'jquery',
    //debug: true,
    charset: 'utf-8'
});
seajs.modify('jquery', function(require, exports) {
  window.jQuery = window.$ = exports
});
seajs.modify('bootstrap', function(require, exports, module) {
  module.exports = $.bootstrap;
});
seajs.modify('prettify', function(require, exports, module) {
  module.exports = $.prettify;
});
</script>
</head>
<body class="main">
<div class="navbar navbar-inverse navbar-static-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="/">前端网事</a>
            <div class="pull-left navbar-text" >春天把代码种下去，秋天收获好多好多用户</div>
                        <div class="nav-collapse collapse pull-right">
                <ul class="nav">
                    <li><a href="http://www.noahlu.com/about.htm">About</a></li>
                    <li><a href="http://www.noahlu.com/portfolio.htm">Portfolio</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    <!--/.contsiner -->
    </div>
</div>
<!--/.navbar -->

<div class="main-content clearfix">

    <div class="content-post span9">
        <div class="page-header post-head">
            <ul class="breadcrumb">
                <li><a href="/">Home</a> <span class="divider">/</span></li>
                                <li><a href="/javascript-note/">JAVASCRIPT笔记</a> <span class="divider">/</span></li>
                            </ul>
            <h1>在Javascript中获取元素样式</h1>
            <p class="post-head-date">2012-09-29 17:36:34 <a href="#comments">评论</a></p>
                    </div>
        
        <div class="post-body">
            通过Javascript动态的调整元素的样式是能实现很多不错的效果，也是DHTML的基础。不过对刚刚接触Javascript的同学来说，获取元素的style可能是个不小的坑，在看下面的例子：
<pre lang="javascript">var topDiv = document.getElementById("topDiv");
topDiv.style.top = parseInt(topDiv.style.top) + 100 + "px";
</pre>
上面的代码首先取得页面上id="topDIv"的元素，然后将它的top增加100个像素。但在实际使用时会发现，上面的代码有时候能改变元素样式，有时候却不能，这是为什么呢？<br />
因为通过Javascript来取得元素的样式是有条件的，1.你想获取的样式是之前通过javascript设置的，2.这个样式是直接写在元素的行内style属性里的。满足其中一个，刚才的代码就能生效，否则不能达到你希望的效果。
<h3>
	CSS2Properties对象
</h3>
对这个原因解释得更深入一点：
<pre lang="javascript">var topValue = topDiv.style.top;
var bgColor = topDiv.style.backgroundColor;
</pre>
像上面的方法通过元素的style属性(如topDiv.style)获得的是一个<strong>CSS2Properties</strong>对象，然后在这个对象里找对应的属性(stopDiv.style.top)。本身CSS2Properties对象只能获取元素的行内样式，无法获取样式表里的样式信息，设置这个属性后，就等于定义了行内样式来覆盖样式表里的样式。看下面的例子：
<pre lang="css">//这是一个名为外部css文件
#topDiv{background-color:#444;}
</pre>
<pre lang="html">
<div id="topDIv" style="position:relative;top:10px;">
	这是一个DIV
</div>

<script type="text/javascript">
var topDiv = document.getElementById("topDiv");
var topValue = topDiv.style.top;//topValue的值为10px
var bgColor = topDiv.style.backgroundColor; //bgColor值为null
</script>
</pre>
<h3>
	Computed Style
</h3>
<a href="http://www.noahlu.com/blog/wp-content/uploads/2011/07/chrome.jpg"><img src="http://www.noahlu.com/blog/wp-content/uploads/2011/07/chrome.jpg" alt="Computed Style计算样式" title="Computed Style计算样式" width="213" height="140" class="alignright size-full wp-image-603" /></a>把样式写在行内当然能够解决问题，不过这种做法相信很多人都不推荐。那有没有别的办法来获取元素的样式呢？当然有，就是Computed Style咯，顾名思义计算样式，它把无论行内定义的，样式表定义的，继承的等等的样式统统经过计算得到影响元素显示的最终样式。在浏览器的调试工具（firefox的firebug，chorme的控制台）里除了能看到元素的style，还有computed style信息。不过遗憾的是，IE不支持它，不过不要紧，IE提供了替代的currentStyle属性。
<h3>
	怎么使用Computed Style呢？
</h3>
直接看一个例子吧：
<pre lang="javascript">var topDiv = document.getElementById("topDiv");
var bgColor = "";
if(topDiv.currentStyle) //判断是否是IE浏览器
  bgColor = topDiv.currentStyle.backgroundColor;
else if(window.getComputedStyle)//如果不是IE，使用getComputedStyle获得样式对象
  bgColor = window.getComputedStyle(topDiv,null).backgroundColor;
</pre>        </div>
        <!--/.post-body -->
    </div>
    <!--/.content-post -->

    
<div class="content-recom ">
    <p>
        some words here.
    </p>
    <div class="well content-recom-list">
        <ul class="nav nav-list">
            <li class="nav-header"><i class="icon-folder-open"></i> 分类</li>
                            <li><a href="/javascript-note/">JAVASCRIPT笔记</a></li>
                            <li><a href="/css/">CSS</a></li>
                            <li><a href="/it-news/">IT风云</a></li>
                            <li><a href="/test/">测试专用目录</a></li>
                        <li class="nav-header"><i class="icon-file"></i> 推荐日志</li>
            
                            <li class="l-style-disc"><a href="/javascript-note/js-event.htm">小议Javascript事件</a></li>
                            <li class="l-style-disc"><a href="/javascript-note/javascript-star-rating.htm">星型评分的Javascript代码</a></li>
                            <li class="l-style-disc"><a href="/javascript-note/script-to-collect-google-top10-page-info.htm">写了一个统计Google搜索前十名页面信息的脚本</a></li>
                            <li class="l-style-disc"><a href="/css/inline-and-block.htm">从tab设计看html元素inline和block的区别</a></li>
                            <li class="l-style-disc"><a href="/test/test1.htm">测试日志1</a></li>
                            <li class="l-style-disc"><a href="/it-news/csdn-user-password-leakage.htm">CSDN网站600万用户密码泄露！</a></li>
                            <li class="l-style-disc"><a href="/test/中文名.htm">测试中文文件名</a></li>
                        <li class="nav-header"><i class="icon-plus-sign"></i> 圈子</li>
            <li><a href="">前端</a></li>
        </ul>
    </div>
</div>
<!--/.content-recom -->

    <div class="content-comments span9">
        <a name="comments"></a>
        <div id="disqus_thread" class="comments-disqus"></div>
        <!-- disqus script-->
        <script type="text/javascript">
            var disqus_shortname = 'noahuasblog';
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
    </div>
    <!--/.content-comments -->

    
</div>
<!--/.main-content -->

<div class="footer">
    <div class="footer-seperater"></div>
    <div class="footer-info clearfix">
        <p class="span10 ">Copyright © 2012 - Noah Lu - Powered by <a href="http://mockingbird.noahlu.com">Mockingbird</a></p>
        <div class="footer-info-links">
        </div>
    </div>
</div>



<div id="tracker" class="hide">
    <!--51.la -->
    <script language="javascript" type="text/javascript" src="http://js.users.51.la/4164118.js"></script>
    <noscript><a href="http://www.51.la/?4164118" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/4164118.asp" style="border:none" /></a></noscript>

    <!-- ga -->
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18326235-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</div>
<script charset="utf-8" src="/assets/js/global.js"></script>

</body>
</html>
